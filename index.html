<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Wasi TikTok Likes Free</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;600&display=swap" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    
    <style>
        :root { --primary-color: #ff0050; --secondary-color: #00f2ea; }
        body { font-family: 'Poppins', sans-serif; background: #121212; color: #fff; min-height: 100vh; display: flex; align-items: center; justify-content: center; }
        .glass-card { background: rgba(255, 255, 255, 0.1); backdrop-filter: blur(10px); border: 1px solid rgba(255,255,255,0.1); border-radius: 20px; padding: 30px; width: 100%; max-width: 400px; text-align: center; }
        .form-control { background: rgba(0,0,0,0.3); border: 1px solid #333; color: white; border-radius: 10px; }
        .form-control:focus { background: rgba(0,0,0,0.5); color: white; border-color: var(--primary-color); box-shadow: none; }
        .btn-order { background: var(--primary-color); border: none; padding: 10px; width: 100%; border-radius: 10px; color: white; font-weight: bold; margin-top: 10px; }
        .btn-order:disabled { opacity: 0.7; cursor: not-allowed; }
        #status { margin-top: 15px; font-size: 14px; }
    </style>
</head>
<body>

<div class="glass-card">
    <i class="fab fa-tiktok" style="font-size: 40px; color: var(--secondary-color);"></i>
    <h3 class="my-3">Wasi TikTok Likes</h3>
    
    <div class="mb-3 text-start">
        <label class="small text-white-50">Video Link</label>
        <input type="url" id="link" class="form-control" placeholder="Paste Link Here">
    </div>
    <div class="mb-3 text-start">
        <label class="small text-white-50">Quantity</label>
        <input type="number" id="qty" class="form-control" placeholder="100" value="100">
    </div>
    
    <button onclick="placeOrder()" id="btn" class="btn-order">GET LIKES</button>
    <div id="status"></div>
    <p class="mt-3 small text-white-50" id="balance">Loading Balance...</p>
</div>

<script>
    // Apni Vercel API ka Link Yahan Dalein (Deploy karne ke baad)
    // Example: https://your-project.vercel.app/api/likes
    const API_URL = "/api/likes"; 

    // 1. Check Balance on Load
    async function checkBalance() {
        try {
            const res = await fetch(`${API_URL}?action=balance`);
            const data = await res.json();
            document.getElementById('balance').innerText = `System Balance: ${data.balance || 'Error'} PKR`;
        } catch(e) { console.log(e); }
    }
    checkBalance();

    // 2. Place Order
    async function placeOrder() {
        const link = document.getElementById('link').value;
        const qty = document.getElementById('qty').value;
        const btn = document.getElementById('btn');
        const status = document.getElementById('status');

        if(!link || !qty) return alert("Please fill all fields");

        btn.disabled = true;
        btn.innerText = "Processing...";
        status.innerHTML = "";

        try {
            const res = await fetch(API_URL, {
                method: 'POST',
                body: JSON.stringify({ link: link, quantity: qty })
            });
            const data = await res.json();

            if(data.order) {
                status.innerHTML = `<span class="text-success">✅ Order Placed! ID: ${data.order}</span>`;
            } else {
                status.innerHTML = `<span class="text-danger">❌ Error: ${data.error}</span>`;
            }
        } catch(e) {
            status.innerHTML = `<span class="text-danger">❌ Failed to connect.</span>`;
        }
        btn.disabled = false;
        btn.innerText = "GET LIKES";
    }
</script>

</body>
</html>
